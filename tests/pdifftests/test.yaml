setup: |
    gulp prod
    ./tests/pdifftests/create-test-db.sh
    ./tests/pdifftests/start-cycledash.sh

waitFor:
    url: http://localhost:5001/
    timeout_secs: 30

aliases:
  - &std-config
      viewportSize:
        width: 1280
        height: 800
      injectCss: |
        body {
          background-color: white;
        }

tests:
  - name: examine
    description: Initial view of a fully-loaded Examine page.
    url: http://localhost:5001/runs/1/examine
    config:
      <<: *std-config

  - name: examine-sorted
    description: Examine page sorted by decreasing Normal Read Depth
    url: http://localhost:5001/runs/1/examine
    config:
      <<: *std-config
      injectJs: |
        c = document.createEvent('MouseEvent');
        c.initMouseEvent('click', true, true, window);
        $('[data-attribute="sample:RD"] a').get(0).dispatchEvent(c);

  - name: examine-tooltip
    description: Examine page showing a Normal Read Depth tooltip
    url: http://localhost:5001/runs/1/examine
    config:
      <<: *std-config
      injectJs: |
        $('[data-attribute="sample:RD"] .tooltip').show();
