{% extends "layouts/layout.html" %}
{%- from 'macros/nav.html' import nav -%}

{% block head %}
<script src="{{ url_for('static', filename='js/d3.bar-chart.js') }}"></script>
<script src="{{ url_for('static', filename='js/vcf.js') }}"></script>
<script src="{{ url_for('static', filename='js/vcf.tools.js') }}"></script>

<script src="http://fb.me/react-0.11.1.js"></script>
<script src="http://fb.me/JSXTransformer-0.11.1.js"></script>

{% endblock %}


{% block body %}
<div id="content"></div>
<script type="text/jsx">
  /** @jsx React.DOM */

var data = {
  charts: ['RD', 'VAF'],
  filters: {'RD': '>10'},
  records: [1,2,3,4,5,6,7,8]
};

var ExaminePage = React.createClass({
  render: function() {
    return (
      <div className="examinePage">
        <AttributeCharts charts={this.props.charts} />
        <Karyogram />
        <VCFTable records={this.props.records} />
      </div>
    );
  }
});

var AttributeCharts = React.createClass({
  render: function() {
    var charts = this.props.charts.map(function(chart) {
      return <AttributeChart chart={chart} key={chart} />;
    });
    return (
      <div className="attributeCharts">
        {charts}
        <AttributeChartAdder />
      </div>
    );
  }
});

var AttributeChartAdder = React.createClass({
  render: function() {
     return <div><button>Add a Chart</button></div>
  }
});

var AttributeChart = React.createClass({
   render: function() {
     return (
       <div>This will be a bar chart for {this.props.chart}.</div>
     );
   }
});

var Karyogram = React.createClass({
   render: function() {
     return (
       <div>Karyogram.</div>
     );
   }
});

var VCFTable = React.createClass({
   render: function() {
     return (
       <table>
         <VCFTableHeader />
         <VCFTableFilter />
         <VCFTableBody records={this.props.records} />
       </table>
     );
   }
});

var VCFTableHeader = React.createClass({
   render: function() {
     return (
       <thead>
         <tr>
           <th>Chromosome</th>
           <th>Position</th>
           <th>Ref</th>
           <th>Alt</th>
           <th>RD</th>
           <th>VAF</th>
           <th>FA</th>
           <th>QUAL</th>
         </tr>
       </thead>
     );
   }
});

var VCFTableFilter = React.createClass({
   render: function() {
     return (
       <thead>
         <tr>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
           <th><input type="text"></input></th>
         </tr>
       </thead>
     );
   }
});

var VCFTableBody = React.createClass({
   render: function() {
     var rows = this.props.records.map(function(record) {
       return <VCFRecord record={record} key={record} />;
     });
     return (
       <tbody>
         {rows}
       </tbody>
     );
   }
});

var VCFRecord = React.createClass({
   render: function() {
     return (
       <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>
         <td>4</td>
         <td>5</td>
         <td>6</td>
         <td>7</td>
         <td>8</td>
       </tr>
     );
   }
});


React.renderComponent(
  <ExaminePage charts={data.charts} records={data.records} />,
  document.getElementById('content')
);

</script>
{% endblock%}
